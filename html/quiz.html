<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrapVibeZ | Quiz</title>
    <link rel="stylesheet" href="../css/trapvibez.css">
    <link rel="icon" href="../assets/logo.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body id="bodyPerguntas">

    <div class="quizAll" id="quizAll">

        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>

        <div class="quizIn" id="quizIn">
            <h4>Pronto?</h4>
        </div>

    </div>

    </div>


</body>

</html>

<script>

    var acertos = 0
    var erros = 0

    var posicao = 0

    function proximaPergunta() {
        var listaPerguntas = [
            `
            <div class="perguntasquiz" id="perguntasquiz2">
    <div class="perguntas">
        <h3>Qual o nome do primeiro álbum de trap lançado no Brasil?</h3>
    </div>
    <div class="alternativas">
        <button class="alternativastxt" onclick="errado()">Rolex Day Date</button>
        <button class="alternativastxt" onclick="acerto()">Mixtape Poison</button>
        <button class="alternativastxt" onclick="errado()">MC Buzzz</button>
        <button class="alternativastxt" onclick="errado()">The Mainstream</button>
    </div>
</div>`,
            `
            <div class="perguntasquiz" id="perguntasquiz3">
    <div class="perguntas">
        <h3>Qual o nome do grupo de trap formado por Dfideliz, Jé Santiago, Derek e Igu?</h3>
    </div>
    <div class="alternativas">
        <button class="alternativastxt" onclick="errado()">ADL</button>
        <button class="alternativastxt" onclick="acerto()">Recayd Mob</button>
        <button class="alternativastxt" onclick="errado()">PrimeiraMente</button>
        <button class="alternativastxt" onclick="errado()">Haikaiss</button>
    </div>
</div>`,
            `
            <div class="perguntasquiz" id="perguntasquiz4">
    <div class="perguntas">
        <h3>Qual o nome do álbum mais famoso de Matuê?</h3>
    </div>
    <div class="alternativas">
        <button class="alternativastxt" onclick="errado()">Ginza</button>
        <button class="alternativastxt" onclick="errado()">Poison</button>
        <button class="alternativastxt" onclick="errado()">Venenos do Sono</button>
        <button class="alternativastxt" onclick="acerto()">Máquina do Tempo</button>
    </div>
</div>`,
            `
    <div class="perguntasquiz" id="perguntasquiz">
    <div class="perguntas">
        <h3>Qual a cidade brasileira que é considerada o berço do trap nacional?</h3>
    </div>
    <div class="alternativas">
        <button class  ="alternativastxt" onclick = "acerto()">São Paulo</button>
        <button class = "alternativastxt" onclick = "erro()">Rio de Janeiro</button>
        <button class = "alternativastxt" onclick = "erro()">Salvador</button>
        <button class = "alternativastxt" onclick = "erro()">Vitória</button>
    </div>
</div>`,
            `
    <div class="perguntasquiz" id="perguntasquiz">
    <div class="perguntas">
        <h3>Qual o nome do grupo formado pelo rapper Felp22? </h3>
    </div>
    <div class="alternativas">
        <button class = "alternativastxt" onclick = "erro()">Recayd Mob</button>
        <button class = "alternativastxt" onclick = "erro()">Costa Gold</button>
        <button class  ="alternativastxt" onclick = "acerto()">Cacife Clandestino</button>
        <button class = "alternativastxt" onclick = "erro()">3030</button>
    </div>
</div>`,
            `
    <div class="perguntasquiz" id="perguntasquiz">
    <div class="perguntas">
        <h3>Em que cidade nasceu o rapper e produtor musical Matuê?</h3>
    </div>
    <div class="alternativas">
        <button class  ="alternativastxt" onclick = "acerto()">Fortaleza</button>
        <button class = "alternativastxt" onclick = "erro()">São Paulo</button>
        <button class = "alternativastxt" onclick = "erro()">Distrito Federal</button>
        <button class = "alternativastxt" onclick = "erro()">Rio de Janeiro</button>
    </div>
</div>`,
            `
    <div class="perguntasquiz" id="perguntasquiz">
    <div class="perguntas">
        <h3>Em que ano surgiu o trap no Brasil?</h3>
    </div>
    <div class="alternativas">
        <button class = "alternativastxt" onclick = "erro()">2017</button>
        <button class = "alternativastxt" onclick = "erro()">2019</button>
        <button class = "alternativastxt" onclick = "erro()">2000</button>
        <button class  ="alternativastxt" onclick = "acerto()">2014</button>
    </div>
</div>`,
            `
    <div class="perguntasquiz" id="perguntasquiz">
    <div class="perguntas">
        <h3>Qual é o nome do rapper que lançou o hit "M4" em 2021?</h3>
    </div>
    <div class="alternativas">
        <button class  ="alternativastxt" onclick = "acerto()">Teto</button>
        <button class = "alternativastxt" onclick = "erro()">Wiu</button>
        <button class = "alternativastxt" onclick = "erro()">FBC</button>
        <button class = "alternativastxt" onclick = "erro()">Raffa Moreira</button>
    </div>
</div>`,
            `
    <div class="perguntasquiz" id="perguntasquiz">
    <div class="perguntas">
        <h3>Em qual cidade de SP nasceu Raffa Moreira?</h3>
    </div>
    <div class="alternativas">
        <button class = "alternativastxt" onclick = "erro()">São Bernardo</button>
        <button class  ="alternativastxt" onclick = "acerto()">Guarulhos</button>
        <button class = "alternativastxt" onclick = "erro()">São Paulo</button>
        <button class = "alternativastxt" onclick = "erro()">Presidente Prudente</button>
    </div>
</div>`
        ]

        if (posicao == 9) {
            contarPontos(listaPerguntas)
        }

        quizIn.innerHTML = `${listaPerguntas[posicao]}`
        posicao++

    }

    function acerto() {
        const certo = document.getElementById('certo')
        acertos++
        proximaPergunta()
    }

    function erro() {
        const errado1 = document.getElementById('errado1')
        erros++
        proximaPergunta()
    }


    function quiz() {

        const totalTime = 30;

        let remainingTime = totalTime;

        const updateInterval = 1000;

        const progressBar = document.querySelector('.progress-fill');

        const intervalId = setInterval(() => {

            remainingTime--;

            const fillWidth = (remainingTime / totalTime) * 100;

            progressBar.style.width = `${fillWidth}%`;

            if (remainingTime <= 0) {
                clearInterval(intervalId);
                alert('Tempo esgotado!');
                contarPontos()
            }
        }, updateInterval);

    }

    function perguntas() {
        quizIn.style.width = `100%`;
        quizIn.innerHTML = `
        <div class="perguntasquiz" id="perguntasquiz1">
    <div class="perguntas">
        <h3>Quem é considerado o "pai do trap" no Brasil?</h3>
    </div>
    <div class="alternativas">
        <button class="alternativastxt" onclick="acerto()">Raffa Moreira</button>
        <button class="alternativastxt" onclick="errado()">MC Guimê</button>
        <button class="alternativastxt" onclick="errado()">MC Bin Laden</button>
        <button class="alternativastxt" onclick="errado()">Lil Nas X</button>
    </div>
</div>`
    }

    var segundos = 2;
    var id = setInterval(() => {
        segundos -= 1;
        if (segundos <= 0) {
            clearInterval(id);
            perguntas()
            quiz()
        }
    }, 1000);

    function contarPontos(listaPerguntas) {
        quizAll.innerHTML = `<div class="contagemDePontos">
        <div class="resumoPerguntas">
            <div class="perguntasAcertos">
                <h4>Você acertou</h4>
                <span>${acertos}</span> 
                <h4>Perguntas</h4>
            </div>
            <div class="perguntasErros">
                <h4>Você errou</h4>
                <span>${erros}</span> 
                <h4>Perguntas</h4>           
             </div>
        </div>

          <div class="graficoEtxt">
        <div class="graficoTxt">
          <h4>Resumo</h4>
        </div>
        <div class="grafico">
            <canvas id="graficoPizza"></canvas>
        </div>
    </div>
  </div>
    `

    const graficoPizza = document.getElementById("graficoPizza");

var dados = {
  labels: ["Respostas"],
  datasets: [
    {
      label: "Acertos",
      data: [acertos],
      backgroundColor: ["green"],
      borderWidth: 0
    },
    {
      label: "Erros",
      data: [erros],
      backgroundColor: ["red"],
      borderWidth: 0
    }

  ]
};

var opcoes = {
  type: 'bar',
  data: dados,
  responsive: true,
  maintainAspectRatio: false,
  plugins: {
    legend: {
      display: false,
      labels: {
        font: {
          size: 13
        },
        color: "white"
      },
      position: "top"
    }
  },
  scales: {
    yAxes: [
      {
        ticks: {
          beginAtZero: true
        }
      }
    ]
  }
};

var grafico = new Chart(graficoPizza, opcoes);

        var segundos = 5
        var id = setInterval(() => {
            segundos -= 1;
            if (segundos <= 0) {
                window.location=`quizHome.html`
            }
        }, 1000);
    }

</script>